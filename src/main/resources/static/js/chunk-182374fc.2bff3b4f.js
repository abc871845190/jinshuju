(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-182374fc"],{"051a":function(t,e,a){"use strict";var i=a("2b14"),l=a.n(i);l.a},"0c47":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticClass:"header",attrs:{type:"flex"}},[a("el-col",{staticStyle:{width:"290px"},attrs:{span:6}},[a("div",{staticClass:"side-bar-left"},[a("h4",{staticStyle:{float:"left","margin-top":"10px","margin-left":"5px"}},[t._v(" 添加题目 ")]),a("br"),a("br"),t._l(t.subjectData,(function(t,e){return a("subjecttype",{key:e,attrs:{data:t.data,title:t.type}})}))],2)]),a("el-col",[a("div",{staticClass:"content"},[a("edittable",{on:{eComponent:t.getComponent}})],1)]),a("el-col",{staticStyle:{width:"290px"},attrs:{span:6}},[a("div",{staticClass:"side-bar-right"},[a("el-tabs",{attrs:{type:"card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"编辑题目",name:"first"}},[a("div",{style:"height:"+(t.window_h-195)+"px;overflow-y:scroll;"},[a(t.component,{tag:"component"})],1)]),a("el-tab-pane",{attrs:{label:"问卷样式",name:"second"}})],1),a("el-button",{staticStyle:{position:"absolute",bottom:"10px",left:"10px",width:"95%",height:"30px","line-height":"8px"},attrs:{type:"primary"},on:{click:t.save_table}},[t._v("保存问卷")])],1)])],1)},l=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("el-header",{staticStyle:{height:"20px","font-size":"14px","text-align":"left",padding:"0 10px"}},[t._v(t._s(t.title))]),a("el-main",{staticStyle:{padding:"0 10px"}},[a("el-row",{attrs:{gutter:10}},t._l(t.data1,(function(e,i){return a("el-col",{key:i,attrs:{span:12}},[a("el-button",{staticStyle:{margin:"5px 0px",width:"125px","text-align":"left"},attrs:{icon:e.icon+" iconfont",size:"medium"},nativeOn:{click:function(a){return t.add(e)}}},[t._v(t._s(e.title))])],1)})),1)],1)],1)},s=[],o=a("be42"),r={data:function(){return{data1:this.data}},props:{data:Array,title:String},methods:{add:function(t){this.$store.commit("tabledata/increment",JSON.parse(JSON.stringify(o["a"].add_table_comp(t))))}}},c=r,d=(a("89d5"),a("2877")),u=Object(d["a"])(c,n,s,!1,null,null,null),p=u.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"all-table"},[a("div",{class:{selected:t.headSelect}},[a("t-head",{key:t.load,attrs:{formTitle:t.form.formTitle,formDesc:t.form.formDesc},on:{"update:formTitle":function(e){return t.$set(t.form,"formTitle",e)},"update:form-title":function(e){return t.$set(t.form,"formTitle",e)},"update:formDesc":function(e){return t.$set(t.form,"formDesc",e)},"update:form-desc":function(e){return t.$set(t.form,"formDesc",e)}},nativeOn:{click:function(e){return t.select_comp(null)}}})],1),a("draggable",{attrs:{sort:!0,disabled:t.isDraggable,"force-fallback":"true",animation:"500",filter:".t-head"},on:{start:t.dragStart,end:t.dragEnd},model:{value:t.item,callback:function(e){t.item=e},expression:"item"}},[a("transition-group",t._l(t.form.templateList,(function(e,i){return a("div",{key:e.templateCount,class:{selected:e.selected},staticStyle:{position:"relative"},on:{click:function(e){return t.select_comp(i)}}},[a(t.iscomponent(e.templateName),{key:t.reload,tag:"component",staticStyle:{"pointer-events":"none"},attrs:{data:e,index:i+1}}),"head"!==e.templateName?a("div",{directives:[{name:"show",rawName:"v-show",value:e.selected,expression:"item.selected"}],staticStyle:{position:"absolute",right:"10px",bottom:"5px"}},[a("el-button",{staticClass:"edit-btn",staticStyle:{display:"block"},attrs:{type:"primary",icon:"el-icon-top",size:"mini"},nativeOn:{mouseenter:function(e){t.isDraggable=!0},mouseleave:function(e){t.isDraggable=!1},click:function(e){return t.moveUp(i)}}}),a("el-button",{staticClass:"edit-btn",staticStyle:{display:"block",margin:"5px 0"},attrs:{type:"primary",icon:"el-icon-bottom",size:"mini"},nativeOn:{mouseenter:function(e){t.isDraggable=!0},mouseleave:function(e){t.isDraggable=!1},click:function(e){return t.moveDown(i)}}}),a("el-button",{staticClass:"edit-btn",staticStyle:{display:"block",margin:"5px 0",color:"#e34152"},attrs:{type:"primary",icon:"el-icon-delete-solid",size:"mini"},nativeOn:{mouseenter:function(e){t.isDraggable=!0},mouseleave:function(e){t.isDraggable=!1},click:function(a){return t.compDelete(e,i)}}})],1):t._e()],1)})),0)],1)],1)},f=[],h=a("fd51"),v=a("850b"),b=a("4161"),g=a("3e89"),x=a("f50a"),C=a("e039"),_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"t-piccheckbox"},[a("h4",{staticStyle:{"margin-bottom":"10px"}},[1===t.data1.templateRequire?a("span",{staticStyle:{color:"red"}},[t._v("*")]):t._e(),t._v(t._s(t.index)+"."+t._s(t.data1.templateTitle))]),a("p",{staticClass:"t-desc"},[t._v(t._s(t.data1.templateDesc))]),a("el-checkbox-group",{staticClass:"t-checkbox-group",model:{value:t.data1.data,callback:function(e){t.$set(t.data1,"data",e)},expression:"data1.data"}},t._l(t.data1.templateContent,(function(e,i){return a("div",{key:i},[i%4===0?a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[t.data1.templateContent.length-i>4||1===t.computedIndex(t.data1.templateContent.length-i)[0]?a("div",{staticClass:"grid-content bg-purple box"},[a("el-image",{staticClass:"image",attrs:{src:t.data1.templateImgUrl[i].value,fit:"fill"}}),a("el-checkbox",{staticClass:"checkbox",attrs:{label:t.data1.templateContent[i],border:""}},[t._v(" "+t._s(t.data1.templateContent[i].value))])],1):t._e()]),a("el-col",{attrs:{span:6}},[t.data1.templateContent.length-i>4||2===t.computedIndex(t.data1.templateContent.length-i)[1]?a("div",{staticClass:"grid-content bg-purple box"},[a("el-image",{staticClass:"image",attrs:{src:t.data1.templateImgUrl[i+1].value,fit:"fill"}}),a("el-checkbox",{staticClass:"checkbox",attrs:{value:t.data1.templateContent[i+1],border:""}},[t._v(" "+t._s(t.data1.templateContent[i+1].value))])],1):t._e()]),a("el-col",{attrs:{span:6}},[t.data1.templateContent.length-i>4||3===t.computedIndex(t.data1.templateContent.length-i)[2]?a("div",{staticClass:"grid-content bg-purple box"},[a("el-image",{staticClass:"image",attrs:{src:t.data1.templateImgUrl[i+2].value,fit:"fill"}}),a("el-checkbox",{staticClass:"checkbox",attrs:{label:t.data1.templateContent[i+2],border:""}},[t._v(" "+t._s(t.data1.templateContent[i+2].value))])],1):t._e()]),a("el-col",{attrs:{span:6}},[t.data1.templateContent.length-i>4||4===t.computedIndex(t.data1.templateContent.length-i)[3]?a("div",{staticClass:"grid-content bg-purple box"},[a("el-image",{staticClass:"image",attrs:{src:t.data1.templateImgUrl[i+3].value,fit:"fill"}}),a("el-checkbox",{staticClass:"checkbox",attrs:{label:t.data1.templateContent[i+3],border:""}},[t._v(" "+t._s(t.data1.templateContent[i+3].value))])],1):t._e()])],1):t._e()],1)})),0)],1)},y=[],k=(a("a9e3"),{data:function(){return{data1:this.data}},methods:{computedIndex:function(t){for(var e=[],a=1;a<=t;a++)e.push(a);return e}},props:{data:{type:Object},index:Number}}),$=k,w=(a("eeb3"),Object(d["a"])($,_,y,!1,null,"034e469b",null)),q=w.exports,O=a("65db"),S={components:{"t-head":h["a"],"t-checkbox":v["a"],"t-radio":b["a"],"t-select":g["a"],"t-textbox":x["a"],"t-picradio":C["a"],"t-piccheckbox":q},data:function(){return{reload:0,item:[],headSelect:!1,load:0,isDraggable:!1}},methods:{select_comp:function(t){if(null===t)if(!0===this.headSelect)this.headSelect=!1,this.$emit("eComponent","");else{for(var e=0;e<this.form.templateList.length;e++)this.form.templateList[e].selected=!1;this.headSelect=!0,this.$emit("eComponent","head")}else if(void 0!=this.form.templateList[t])if(1==this.form.templateList[t].selected){for(var a=0;a<this.form.templateList.length;a++)this.form.templateList[a].selected=!1;this.$emit("eComponent","")}else{for(var i=0;i<this.form.templateList.length;i++)this.form.templateList[i].selected=!1;this.headSelect=!1,this.form.templateList[t].selected=!0,this.$emit("eComponent",this.form.templateList[t].templateName),this.$store.commit("tabledata/setindex",t)}},moveUp:function(t){0!=t&&(this.$store.commit("tabledata/moveup",t),this.$store.commit("tabledata/setindex",t-1),this.reload++)},moveDown:function(t){this.form.templateList.length!=t+1&&(this.$store.commit("tabledata/movedown",t),this.$store.commit("tabledata/setindex",t+1),this.reload++)},compDelete:function(t,e){var a=this.$store.getters["tabledata/deletePicArr"];for(var i in a)if(a[i].templateCount===t.templateCount)for(var l in a[i].option)Object(O["b"])(a[i].option[l]);this.$store.commit("tabledata/delete",e),this.$emit("eComponent",""),this.reload++},iscomponent:function(t){return o["a"].is_table_comp(t)},dragStart:function(){this.item=this.$store.getters["tabledata/form"].templateList,this.reload++},dragEnd:function(t){this.$store.commit("tabledata/update",this.item);for(var e=t.newIndex,a=0;a<this.form.templateList.length;a++)this.form.templateList[a].selected=!1;this.headSelect=!1,this.form.templateList[e].selected=!0,this.$emit("eComponent",this.form.templateList[e].templateName),this.$store.commit("tabledata/setindex",e),this.reload++}},computed:{form:function(){return this.$store.getters["tabledata/form"]}},created:function(){this.item=this.$store.getters["tabledata/form"].templateList},mounted:function(){for(var t=0;t<this.form.templateList.length;t++)this.form.templateList[t].selected=!1}},T=S,I=(a("c6db"),Object(d["a"])(T,m,f,!1,null,null,null)),B=I.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"e-head"},[a("div",{staticClass:"text"},[t._v("标题")]),a("el-input",{attrs:{size:"small"},model:{value:t.form.formTitle,callback:function(e){t.$set(t.form,"formTitle",e)},expression:"form.formTitle"}}),a("div",{staticClass:"text"},[t._v("标题描述")]),a("el-input",{attrs:{size:"small"},model:{value:t.form.formDesc,callback:function(e){t.$set(t.form,"formDesc",e)},expression:"form.formDesc"}})],1)},D=[],z={data:function(){return{}},computed:{form:function(){return this.$store.getters["tabledata/form"]}}},R=z,L=(a("051a"),Object(d["a"])(R,j,D,!1,null,"4488966d",null)),U=L.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"e-checkbox"},[a("div",{staticClass:"text"},[t._v("标题")]),a("el-input",{attrs:{size:"small"},model:{value:t.data.templateTitle,callback:function(e){t.$set(t.data,"templateTitle",e)},expression:"data.templateTitle"}}),a("div",{staticClass:"text"},[t._v("标题描述")]),a("el-input",{attrs:{size:"small"},model:{value:t.data.templateDesc,callback:function(e){t.$set(t.data,"templateDesc",e)},expression:"data.templateDesc"}}),a("div",{staticClass:"text"},[t._v("选项")]),t._l(t.data.templateContent,(function(e,i){return a("div",{key:i},[a("el-input",{staticStyle:{width:"200px",display:"inline-block"},attrs:{size:"small",placeholder:e.value},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}}),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(e){return t.delete_option(i)}}})],1)})),a("el-row",[a("el-col",{attrs:{span:12,offset:6}},[a("el-button",{attrs:{size:"mini"},on:{click:t.add_option}},[t._v("添加项")])],1)],1),a("el-switch",{staticStyle:{margin:"20px"},attrs:{"active-text":"是否必填","active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:t.isRequire},model:{value:t.requireBoolean,callback:function(e){t.requireBoolean=e},expression:"requireBoolean"}})],2)},E=[],A=(a("a434"),{data:function(){return{newOption:[],requireBoolean:!0}},methods:{add_option:function(){var t=o["a"].getNumBycircluerSort(this.data.templateContent);this.data.templateContent.push({key:t,value:"空"}),this.newOption.push(t)},delete_option:function(t){if(null!==this.data.formTemplateId&&void 0!==this.data.formTemplateId&&""!==this.data.formTemplateId){var e=!1;for(var a in this.newOption)if(this.newOption[a]===this.data.templateContent[t].key){e=!0,this.newOption.splice(a,1);break}!1===e&&Object(O["c"])(this.data.formTemplateId,this.data.templateContent[t])}this.data.templateContent.splice(t,1)},isRequire:function(){!1===this.requireBoolean?this.data.templateRequire=0:this.data.templateRequire=1}},computed:{data:function(){return this.$store.getters["tabledata/data"]}},mounted:function(){0===this.$store.getters["tabledata/data"].templateRequire?this.requireBoolean=!1:this.requireBoolean=!0}}),P=A,J=(a("ec50"),Object(d["a"])(P,N,E,!1,null,"0897de00",null)),F=J.exports,M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"e-radio"},[a("div",{staticClass:"text"},[t._v("标题")]),a("el-input",{attrs:{size:"small"},model:{value:t.data.templateTitle,callback:function(e){t.$set(t.data,"templateTitle",e)},expression:"data.templateTitle"}}),a("div",{staticClass:"text"},[t._v("标题描述")]),a("el-input",{attrs:{size:"small"},model:{value:t.data.templateDesc,callback:function(e){t.$set(t.data,"templateDesc",e)},expression:"data.templateDesc"}}),a("div",{staticClass:"text"},[t._v("选项")]),t._l(t.data.templateContent,(function(e,i){return a("div",{key:i},[a("el-input",{staticStyle:{width:"200px",display:"inline-block"},attrs:{size:"small",placeholder:e.value},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}}),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(e){return t.delete_option(i)}}})],1)})),a("el-row",[a("el-col",{attrs:{span:12,offset:6}},[a("el-button",{attrs:{size:"mini"},on:{click:t.add_option}},[t._v("添加项")])],1)],1),a("el-switch",{staticStyle:{margin:"20px"},attrs:{"active-text":"是否必填","active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:t.isRequire},model:{value:t.requireBoolean,callback:function(e){t.requireBoolean=e},expression:"requireBoolean"}})],2)},V=[],H={data:function(){return{newOption:[],requireBoolean:!0}},methods:{add_option:function(){var t=o["a"].getNumBycircluerSort(this.data.templateContent);this.data.templateContent.push({key:t,value:"空"})},delete_option:function(t){if(null!==this.data.formTemplateId&&void 0!==this.data.formTemplateId&&""!==this.data.formTemplateId){var e=!1;for(var a in this.newOption)if(this.newOption[a]===this.data.templateContent[t].key){e=!0,this.newOption.splice(a,1);break}!1===e&&Object(O["c"])(this.data.formTemplateId,this.data.templateContent[t])}this.data.templateContent.splice(t,1)},isRequire:function(){!1===this.requireBoolean?this.data.templateRequire=0:this.data.templateRequire=1}},computed:{data:function(){return this.$store.getters["tabledata/data"]}},mounted:function(){0===this.$store.getters["tabledata/data"].templateRequire?this.requireBoolean=!1:this.requireBoolean=!0}},G=H,K=(a("ddd4"),Object(d["a"])(G,M,V,!1,null,"ec3dc50a",null)),Q=K.exports,W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"e-select"},[a("div",{staticClass:"text"},[t._v("标题")]),a("el-input",{attrs:{size:"small"},model:{value:t.data.templateTitle,callback:function(e){t.$set(t.data,"templateTitle",e)},expression:"data.templateTitle"}}),a("div",{staticClass:"text"},[t._v("标题描述")]),a("el-input",{attrs:{size:"small"},model:{value:t.data.templateDesc,callback:function(e){t.$set(t.data,"templateDesc",e)},expression:"data.templateDesc"}}),a("div",{staticClass:"text"},[t._v("选项")]),t._l(t.data.templateContent,(function(e,i){return a("div",{key:i},[a("el-input",{staticStyle:{width:"200px",display:"inline-block"},attrs:{size:"small",placeholder:e.value},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}}),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(e){return t.delete_option(i)}}})],1)})),a("el-row",[a("el-col",{attrs:{span:12,offset:6}},[a("el-button",{attrs:{size:"mini"},on:{click:t.add_option}},[t._v("添加项")])],1)],1),a("el-switch",{staticStyle:{margin:"20px"},attrs:{"active-text":"是否必填","active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:t.isRequire},model:{value:t.requireBoolean,callback:function(e){t.requireBoolean=e},expression:"requireBoolean"}})],2)},X=[],Y={data:function(){return{newOption:[],requireBoolean:!0}},methods:{add_option:function(){var t=o["a"].getNumBycircluerSort(this.data.templateContent);this.data.templateContent.push({key:t,value:"空"})},delete_option:function(t){if(null!==this.data.formTemplateId&&void 0!==this.data.formTemplateId&&""!==this.data.formTemplateId){var e=!1;for(var a in this.newOption)if(this.newOption[a]===this.data.templateContent[t].key){e=!0,this.newOption.splice(a,1);break}!1===e&&Object(O["c"])(this.data.formTemplateId,this.data.templateContent[t])}this.data.templateContent.splice(t,1)},isRequire:function(){!1===this.requireBoolean?this.data.templateRequire=0:this.data.templateRequire=1}},computed:{data:function(){return this.$store.getters["tabledata/data"]}},mounted:function(){0===this.$store.getters["tabledata/data"].templateRequire?this.requireBoolean=!1:this.requireBoolean=!0}},Z=Y,tt=(a("3adb"),Object(d["a"])(Z,W,X,!1,null,"31c65775",null)),et=tt.exports,at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"e-checkbox"},[a("div",{staticClass:"text"},[t._v("标题")]),a("el-input",{attrs:{size:"small"},model:{value:t.data.templateTitle,callback:function(e){t.$set(t.data,"templateTitle",e)},expression:"data.templateTitle"}}),a("div",{staticClass:"text"},[t._v("标题描述")]),a("el-input",{attrs:{size:"small"},model:{value:t.data.templateDesc,callback:function(e){t.$set(t.data,"templateDesc",e)},expression:"data.templateDesc"}}),a("el-switch",{staticStyle:{margin:"20px"},attrs:{"active-text":"是否必填","active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:t.isRequire},model:{value:t.requireBoolean,callback:function(e){t.requireBoolean=e},expression:"requireBoolean"}})],1)},it=[],lt={data:function(){return{requireBoolean:!0}},methods:{isRequire:function(){!1===this.requireBoolean?this.data.templateRequire=0:this.data.templateRequire=1}},computed:{data:function(){return this.$store.getters["tabledata/data"]}},mounted:function(){0===this.$store.getters["tabledata/data"].templateRequire?this.requireBoolean=!1:this.requireBoolean=!0}},nt=lt,st=(a("1c96"),Object(d["a"])(nt,at,it,!1,null,"4215665c",null)),ot=st.exports,rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"e-picradio"},[a("div",{staticClass:"text"},[t._v("标题")]),a("el-input",{attrs:{size:"small"},model:{value:t.data.templateTitle,callback:function(e){t.$set(t.data,"templateTitle",e)},expression:"data.templateTitle"}}),a("div",{staticClass:"text"},[t._v("标题描述")]),a("el-input",{attrs:{size:"small"},model:{value:t.data.templateDesc,callback:function(e){t.$set(t.data,"templateDesc",e)},expression:"data.templateDesc"}}),a("div",{staticClass:"text"},[t._v("选项")]),t._l(t.data.templateContent,(function(e,i){return a("div",{key:i,staticClass:"picradio"},[a("el-image",{staticClass:"image",attrs:{src:t.getPicUrl(i),"preview-src-list":t.data.templateImgUrl.value}}),a("el-input",{staticClass:"input",attrs:{type:"textarea",autosize:t.areasize,size:"large",resize:"none",placeholder:"请输入"},model:{value:t.data.templateContent[i].value,callback:function(e){t.$set(t.data.templateContent[i],"value",e)},expression:"data.templateContent[index].value"}}),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(e){return t.delete_option(i)}}})],1)})),a("el-upload",{ref:"upload",staticClass:"upload-demo upload_div",attrs:{drag:"",action:"http://jinshuju.max3.fgnwctvip.com/FormController/uploadImg",multiple:"","auto-upload":!1,"on-change":t.getList,"file-list":t.fileList,"show-file-list":!1,accept:".png,.jpeg,.jpg,.gif"}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(" 只能上传jpg/png文件，且不超过500kb ")])]),a("el-switch",{staticStyle:{margin:"20px"},attrs:{"active-text":"是否必填","active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:t.isRequire},model:{value:t.requireBoolean,callback:function(e){t.requireBoolean=e},expression:"requireBoolean"}})],2)},ct=[],dt=(a("baa5"),a("fb6a"),a("b0c0"),a("ac1f"),a("5319"),{data:function(){return{fileList:[],areasize:{minRows:1,maxRows:3},requireBoolean:!0}},methods:{getList:function(t,e){var a=this,i=t.name.substr(t.name.lastIndexOf(".")+1);if("gif"===i||"jpg"===i||"jpeg"===i||"png"===i){this.fileList=e;var l=new FormData;l.append("file",t.raw),Object(O["h"])(l).then((function(e){var i=o["a"].getNumBycircluerSort(a.data.templateContent),l=a.$store.getters["tabledata/deletePicArr"],n=!1;for(var s in l)if(l[s].templateCount===a.data.templateCount){l[s].option.push(e.data.replace(/\\/g,"/")),n=!0;break}!1===n&&l.push({templateCount:a.data.templateCount,option:[e.data.replace(/\\/g,"/")]}),a.data.templateContent.push({key:i,value:String(t.uid)}),console.log(a.$store.state.getURL),a.data.templateImgUrl.push({key:i,value:a.$store.state.getURL+e.data.replace(/\\/g,"/")})}))}else alert("文件格式不符")},getPicUrl:function(t){return this.data.templateImgUrl[t].value},delete_option:function(t){null!==this.data.formTemplateId&&void 0!==this.data.formTemplateId&&""!==this.data.formTemplateId&&Object(O["c"])(this.data.formTemplateId,this.data.templateContent[t]);var e=this.data.templateImgUrl[t].value;Object(O["b"])(e.slice(e.lastIndexOf("img")-1)),this.data.templateContent.splice(t,1),this.fileList.splice(t,1),this.data.templateImgUrl.splice(t,1)},isRequire:function(){!1===this.requireBoolean?this.data.templateRequire=0:this.data.templateRequire=1}},computed:{data:function(){return this.$store.getters["tabledata/data"]},newOption:function(){return this.$store.getters["tabledata/newOption"]}},mounted:function(){0===this.$store.getters["tabledata/data"].templateRequire?this.requireBoolean=!1:this.requireBoolean=!0}}),ut=dt,pt=(a("f661"),Object(d["a"])(ut,rt,ct,!1,null,"30b28996",null)),mt=pt.exports,ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"e-piccheckbox"},[a("div",{staticClass:"text"},[t._v("标题")]),a("el-input",{attrs:{size:"small"},model:{value:t.data.templateTitle,callback:function(e){t.$set(t.data,"templateTitle",e)},expression:"data.templateTitle"}}),a("div",{staticClass:"text"},[t._v("标题描述")]),a("el-input",{attrs:{size:"small"},model:{value:t.data.templateDesc,callback:function(e){t.$set(t.data,"templateDesc",e)},expression:"data.templateDesc"}}),a("div",{staticClass:"text"},[t._v("选项")]),t._l(t.data.templateContent,(function(e,i){return a("div",{key:i,staticClass:"piccheckbox"},[a("el-image",{staticClass:"image",attrs:{src:t.getPicUrl(i),"preview-src-list":t.data.templateImgUrl.value}}),a("el-input",{staticClass:"input",attrs:{type:"textarea",autosize:t.areasize,size:"large",resize:"none",placeholder:"请输入"},model:{value:t.data.templateContent[i].value,callback:function(e){t.$set(t.data.templateContent[i],"value",e)},expression:"data.templateContent[index].value"}}),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(e){return t.delete_option(i)}}})],1)})),a("el-upload",{ref:"upload",staticClass:"upload-demo upload_div",attrs:{drag:"",action:"http://jinshuju.max3.fgnwctvip.com/FormController/uploadImg",multiple:"","auto-upload":!1,"on-change":t.getList,"file-list":t.fileList,"show-file-list":!1,accept:".png,.jpeg,.jpg,.gif"}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(" 只能上传jpg/png文件，且不超过500kb ")])]),a("el-switch",{staticStyle:{margin:"20px"},attrs:{"active-text":"是否必填","active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:t.isRequire},model:{value:t.requireBoolean,callback:function(e){t.requireBoolean=e},expression:"requireBoolean"}})],2)},ht=[],vt={data:function(){return{fileList:[],areasize:{minRows:1,maxRows:3},requireBoolean:!0}},methods:{getList:function(t,e){var a=this,i=t.name.substr(t.name.lastIndexOf(".")+1);if("gif"===i||"jpg"===i||"jpeg"===i||"png"===i){this.fileList=e;var l=new FormData;l.append("file",t.raw),Object(O["h"])(l).then((function(e){var i=o["a"].getNumBycircluerSort(a.data.templateContent),l=a.$store.getters["tabledata/deletePicArr"],n=!1;for(var s in l)if(l[s].templateCount===a.data.templateCount){l[s].option.push(e.data.replace(/\\/g,"/")),n=!0;break}!1===n&&l.push({templateCount:a.data.templateCount,option:[e.data.replace(/\\/g,"/")]}),a.data.templateContent.push({key:i,value:String(t.uid)}),a.data.templateImgUrl.push({key:i,value:a.$store.state.getURL+e.data.replace(/\\/g,"/")})}))}else alert("文件格式不符")},getPicUrl:function(t){return this.data.templateImgUrl[t].value},delete_option:function(t){null!==this.data.formTemplateId&&void 0!==this.data.formTemplateId&&""!==this.data.formTemplateId&&Object(O["c"])(this.data.formTemplateId,this.data.templateContent[t]);var e=this.data.templateImgUrl[t].value;Object(O["b"])(e.slice(e.lastIndexOf("img")-1)),this.data.templateContent.splice(t,1),this.fileList.splice(t,1),this.data.templateImgUrl.splice(t,1)},isRequire:function(){!1===this.requireBoolean?this.data.templateRequire=0:this.data.templateRequire=1}},computed:{data:function(){return this.$store.getters["tabledata/data"]},newOption:function(){return this.$store.getters["tabledata/newOption"]}},mounted:function(){0===this.$store.getters["tabledata/data"].templateRequire?this.requireBoolean=!1:this.requireBoolean=!0}},bt=vt,gt=(a("ba1c"),Object(d["a"])(bt,ft,ht,!1,null,"83a20f08",null)),xt=gt.exports,Ct=a("1bab");function _t(){return Object(Ct["a"])({url:"/data/subject.json"})}var yt={components:{subjecttype:p,edittable:B,"e-head":U,"e-checkbox":F,"e-radio":Q,"e-select":et,"e-textbox":ot,"e-picradio":mt,"e-piccheckbox":xt},data:function(){return{subjectData:[],activeName:"first",component:""}},methods:{getComponent:function(t){this.component=o["a"].is_editpage_comp(t)},save_table:function(){var t=this;this.$store.commit("tabledata/cleanPicArr",[]),0!==this.$store.getters["tabledata/form"].templateList.length?this.$confirm("是否确认保存表单?","保存表单",{confirmButtonText:"保存",cancelButtonText:"取消",type:"warning"}).then((function(){console.log("-----------保存问卷----------------"),console.log(t.$store.getters["tabledata/form"]);var e=JSON.parse(JSON.stringify(t.$store.getters["tabledata/form"]));Object(O["f"])(e).then((function(){Object(O["e"])(t.$route.params.id).then((function(e){t.$store.commit("tabledata/insert",e.data)}))})),t.$message({showClose:!0,message:"保存表单成功!",type:"success"}),t.$router.push("/home")})):this.$alert("表单题目不能空哦！","提示",{confirmButtonText:"确定"})}},computed:{window_h:function(){return this.$store.getters["windowheight/height"]}},created:function(){sessionStorage.setItem("TagActiveName","first"),window.addEventListener("beforeunload",(function(t){t.preventDefault(),t.returnValue="hello"}),!0)},mounted:function(){var t=this;Object(O["e"])(this.$route.params.id).then((function(e){console.log("error1"),console.log(e.data),t.$store.commit("tabledata/insert",e.data),_t().then((function(a){t.subjectData=a[e.data.formType],t.loading=!1}))}))},beforeDestroy:function(){this.$store.commit("tabledata/update",[]);var t=this.$store.getters["tabledata/deletePicArr"];for(var e in t)for(var a in t[e].option)Object(O["b"])(t[e].option[a]);window.removeEventListener("beforeunload",(function(t){t.preventDefault(),t.returnValue="hello"}),!1)}},kt=yt,$t=(a("adbf"),Object(d["a"])(kt,i,l,!1,null,"11406afe",null));e["default"]=$t.exports},"136b":function(t,e,a){},"1c96":function(t,e,a){"use strict";var i=a("136b"),l=a.n(i);l.a},"2b14":function(t,e,a){},"3adb":function(t,e,a){"use strict";var i=a("7e0e"),l=a.n(i);l.a},"3b6c":function(t,e,a){},"6df0":function(t,e,a){},"705f":function(t,e,a){},"7e0e":function(t,e,a){},"89d5":function(t,e,a){"use strict";var i=a("6df0"),l=a.n(i);l.a},"8f35":function(t,e,a){},"91e0":function(t,e,a){},adbf:function(t,e,a){"use strict";var i=a("91e0"),l=a.n(i);l.a},b0c0:function(t,e,a){var i=a("83ab"),l=a("9bf2").f,n=Function.prototype,s=n.toString,o=/^\s*function ([^ (]*)/,r="name";i&&!(r in n)&&l(n,r,{configurable:!0,get:function(){try{return s.call(this).match(o)[1]}catch(t){return""}}})},b120:function(t,e,a){},ba1c:function(t,e,a){"use strict";var i=a("b120"),l=a.n(i);l.a},baa5:function(t,e,a){var i=a("23e7"),l=a("e58c");i({target:"Array",proto:!0,forced:l!==[].lastIndexOf},{lastIndexOf:l})},c6db:function(t,e,a){"use strict";var i=a("705f"),l=a.n(i);l.a},db43:function(t,e,a){},ddd4:function(t,e,a){"use strict";var i=a("3b6c"),l=a.n(i);l.a},e58c:function(t,e,a){"use strict";var i=a("fc6a"),l=a("a691"),n=a("50c4"),s=a("a640"),o=a("ae40"),r=Math.min,c=[].lastIndexOf,d=!!c&&1/[1].lastIndexOf(1,-0)<0,u=s("lastIndexOf"),p=o("indexOf",{ACCESSORS:!0,1:0}),m=d||!u||!p;t.exports=m?function(t){if(d)return c.apply(this,arguments)||0;var e=i(this),a=n(e.length),s=a-1;for(arguments.length>1&&(s=r(s,l(arguments[1]))),s<0&&(s=a+s);s>=0;s--)if(s in e&&e[s]===t)return s||0;return-1}:c},e620:function(t,e,a){},ec50:function(t,e,a){"use strict";var i=a("db43"),l=a.n(i);l.a},eeb3:function(t,e,a){"use strict";var i=a("8f35"),l=a.n(i);l.a},f661:function(t,e,a){"use strict";var i=a("e620"),l=a.n(i);l.a},fb6a:function(t,e,a){"use strict";var i=a("23e7"),l=a("861d"),n=a("e8b5"),s=a("23cb"),o=a("50c4"),r=a("fc6a"),c=a("8418"),d=a("b622"),u=a("1dde"),p=a("ae40"),m=u("slice"),f=p("slice",{ACCESSORS:!0,0:0,1:2}),h=d("species"),v=[].slice,b=Math.max;i({target:"Array",proto:!0,forced:!m||!f},{slice:function(t,e){var a,i,d,u=r(this),p=o(u.length),m=s(t,p),f=s(void 0===e?p:e,p);if(n(u)&&(a=u.constructor,"function"!=typeof a||a!==Array&&!n(a.prototype)?l(a)&&(a=a[h],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return v.call(u,m,f);for(i=new(void 0===a?Array:a)(b(f-m,0)),d=0;m<f;m++,d++)m in u&&c(i,d,u[m]);return i.length=d,i}})},fd51:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"t-head"},[a("h2",[t._v(t._s(t.formTitle))]),a("p",[t._v(t._s(t.formDesc))])])},l=[],n={name:"Head",data:function(){return{}},props:{formTitle:{type:String},formDesc:{type:String}}},s=n,o=a("2877"),r=Object(o["a"])(s,i,l,!1,null,null,null);e["a"]=r.exports}}]);
//# sourceMappingURL=chunk-182374fc.2bff3b4f.js.map