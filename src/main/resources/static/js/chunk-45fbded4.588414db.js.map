{"version":3,"sources":["webpack:///src/components/EditPageComp/BodyComponent/formdata.vue","webpack:///./src/components/EditPageComp/BodyComponent/formdata.vue?5a87","webpack:///./src/components/EditPageComp/BodyComponent/formdata.vue?9f88","webpack:///./src/components/EditPageComp/BodyComponent/formdata.vue","webpack:///./src/components/EditPageComp/BodyComponent/formdata.vue?2986"],"names":["components","inject","data","dialogVisible","tableColumn","tableData","multipleSelection","selectData","formId","methods","getSelect","this","i","row","length","push","dataId","getSelectAll","selection","getDetails","console","log","refreshData","reload","addData","delData","res","code","gettableDatas","axios","ans","JSON","parse","value","created","sessionStorage","setItem","$route","params","id","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","on","$event","_l","item","index","key","staticStyle","prop","label","slot","_v","staticRenderFns","component"],"mappings":"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","file":"js/chunk-45fbded4.588414db.js","sourcesContent":["<template>\r\n  <div class=\"fd-all\">\r\n    <el-dialog title=\"数据详情\" :visible.sync=\"dialogVisible\" width=\"80%\">\r\n      <!-- 填写表单 -->\r\n\r\n      <div class=\"fd-main\">\r\n        <!-- 总表max-height=\"300\" -->\r\n        <el-table\r\n          :data=\"tableData\"\r\n          stripe\r\n          @select-all=\"getSelectAll\"\r\n          @select=\"getSelect\"\r\n          @row-click=\"getDetails\"\r\n        >\r\n          <!-- 左侧多选 -->\r\n          <el-table-column type=\"selection\" width=\"55\"></el-table-column>\r\n          <!-- 表头 使用axios读取本地json数据获取组件 -->\r\n          <el-table-column\r\n            v-for=\"(item, index) in tableColumn\"\r\n            :key=\"index\"\r\n            :prop=\"item.prop\"\r\n            :label=\"item.label\"\r\n            style=\"width: '150'\"\r\n            sortable\r\n            fixed\r\n          ></el-table-column>\r\n        </el-table>\r\n      </div>\r\n\r\n      <!-- 尾部的按钮 -->\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"dialogVisible = false\"\r\n          >确 定</el-button\r\n        >\r\n      </span>\r\n    </el-dialog>\r\n    <div class=\"fd-head\">\r\n      <tbody>\r\n        <tr class=\"fd-tr\">\r\n          <td>\r\n            <el-button\r\n              class=\"iconfont gd-shuaxin\"\r\n              type=\"text\"\r\n              @click=\"refreshData\"\r\n              >刷新页面</el-button\r\n            >\r\n          </td>\r\n          <td>\r\n            <el-button\r\n              class=\"iconfont gd-tianjia\"\r\n              type=\"text\"\r\n              @click=\"dialogVisible = true\"\r\n              >增加数据</el-button\r\n            >\r\n          </td>\r\n          <td>\r\n            <el-button class=\"iconfont gd-shanchu\" type=\"text\" @click=\"delData\"\r\n              >删除数据</el-button\r\n            >\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </div>\r\n    <div class=\"fd-main\">\r\n      <!-- 总表max-height=\"300\" -->\r\n      <el-table\r\n        :data=\"tableData\"\r\n        stripe\r\n        @select-all=\"getSelectAll\"\r\n        @select=\"getSelect\"\r\n        @row-click=\"getDetails\"\r\n      >\r\n        <!-- 左侧多选 -->\r\n        <el-table-column type=\"selection\" width=\"55\"></el-table-column>\r\n        <!-- 序列 -->\r\n        <el-table-column type=\"index\" width=\"55\"></el-table-column>\r\n        <!-- 表头 使用axios读取本地json数据获取组件 -->\r\n        <el-table-column\r\n          v-for=\"(item, index) in tableColumn\"\r\n          :key=\"index\"\r\n          :prop=\"item.prop\"\r\n          :label=\"item.label\"\r\n          style=\"width: '150'\"\r\n          sortable\r\n        ></el-table-column>\r\n      </el-table>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport {\r\n  gettableColumn,\r\n  gettableData,\r\n  deletetableData,\r\n} from \"@/network/formdata.js\";\r\n\r\n// import FillTable from \"@/components/EditPageComp/BodyComponent/FillTable.vue\";\r\nexport default {\r\n  components: {\r\n    // FillTable,\r\n  },\r\n  inject: [\"reload\"],\r\n  data() {\r\n    return {\r\n      dialogVisible: false,\r\n      tableColumn: [],\r\n      tableData: [],\r\n      multipleSelection: [],\r\n      selectData: [],\r\n      formId: \"\",\r\n    };\r\n  },\r\n  methods: {\r\n    // 单选获取信息\r\n    getSelect(row) {\r\n      this.selectData = [];\r\n      for (var i = 0; i < row.length; i++) {\r\n        //选中的行，将行里面的dataId存入数组\r\n        this.selectData.push(row[i].dataId);\r\n      }\r\n    },\r\n    // 全选获取信息\r\n    getSelectAll(selection) {\r\n      this.getSelect(selection);\r\n    },\r\n\r\n    //点击获取单行的信息\r\n    getDetails(row) {\r\n      this.dialogVisible = true;\r\n      console.log(row);\r\n    },\r\n\r\n    //刷新页面\r\n    refreshData() {\r\n      this.reload();\r\n    },\r\n    addData() {},\r\n\r\n    //多选删除\r\n    delData() {\r\n      deletetableData(this.selectData).then((res) => {\r\n        console.log(res);\r\n        if (res.code == 1) {\r\n          this.reload();\r\n        }\r\n      });\r\n    },\r\n\r\n    gettableDatas() {\r\n      this.axios\r\n        .all([gettableData(this.formId), gettableColumn(this.formId)])\r\n        .then(\r\n          this.axios.spread((res1, res2) => {\r\n            var allData = res1.data;\r\n            var allQuestion = res2.data;\r\n            var ans = [];\r\n            var arrData = [];\r\n            console.log(allData);\r\n            console.log(allQuestion);\r\n\r\n            //将返回的标题头 id 与 标题文字 拼接成键值对，存入数组 prop和label，以符合element ui 的格式\r\n            for (let questionIndex in allQuestion) {\r\n              // console.log(res.data[questionIndex].templateContent);\r\n              var paramOption = {};\r\n              paramOption.prop = allQuestion[questionIndex].formTemplateId + \"\";\r\n              paramOption.label = allQuestion[questionIndex].templateTitle;\r\n              this.tableColumn.push(paramOption);\r\n            }\r\n\r\n            //答案与id拼接\r\n            if(allData[0]===undefined){\r\n              alert(\"暂无数据哟~(#^.^#)\")\r\n            }else{\r\n\r\n            for (let i in allData) {\r\n              //循环表身单行 拿 表身的formTemplateId\r\n              for (let j in allQuestion) {\r\n                //循环表头 拿 表头的formTemplateId，\r\n                let paramId = {};\r\n                let paramData = {};\r\n                paramId[\"dataId\"] = allData[i].dataId;\r\n                // arrAns.push(paramData)\r\n                for (let k in allData[i].dataDetailsList) {\r\n                  //判断表身formTemplateId和表头formTemplateId是否相等\r\n                  if (\r\n                    allQuestion[k].formTemplateId ==\r\n                    allData[i].dataDetailsList[j].formTemplateId\r\n                  ) {\r\n                    //如果相等，就拿表头中的 问题类型templateName 开始判断\r\n                    //----------------------------------1、如果为单选 则处理object\r\n                    if (\r\n                      allQuestion[k].templateName == \"radio\" ||\r\n                      allQuestion[k].templateName == \"select\" ||\r\n                      allQuestion[k].templateName == \"picradio\"\r\n                    ) {\r\n                      //如果不为空值或者空数组，做处理\r\n                      if (\r\n                        allData[i].dataDetailsList[j].dataContent != \"[]\" &&\r\n                        allData[i].dataDetailsList[j].dataContent != \"\"\r\n                      ) {\r\n                        ans = JSON.parse(\r\n                          allData[i].dataDetailsList[j].dataContent\r\n                        );\r\n                        ans = ans.value;\r\n                      }\r\n                      //空值则赋一个“”\r\n                      else {\r\n                        ans = JSON.parse('{\"key\":0,\"value\":\"\"}');\r\n                        ans = ans.value;\r\n                      }\r\n                      // console.log(ans);\r\n                    }\r\n                    //----------------------------------2、如果为多选 则处理array\r\n                    else if (\r\n                      allQuestion[k].templateName == \"checkbox\" ||\r\n                      allQuestion[k].templateName == \"piccheckbox\"\r\n                    ) {\r\n                      //如果为不为空值或者空数组，做处理\r\n                      if (\r\n                        allData[i].dataDetailsList[j].dataContent != \"[]\" &&\r\n                        allData[i].dataDetailsList[j].dataContent != \"\"\r\n                      ) {\r\n                        // 将数组拆开拿每一个值存入对应位置\r\n                        let result = eval(\r\n                          allData[i].dataDetailsList[j].dataContent\r\n                        );\r\n                        ans = result.map((option) => option.value + \" \");\r\n                      }\r\n                      //空值则赋一个“”\r\n                      else {\r\n                        ans = JSON.parse('{\"key\":0,\"value\":\"\"}');\r\n                        ans = ans.value;\r\n                      }\r\n                    }\r\n                    //----------------------------------3、如果为填空，直接使用\r\n                    else {\r\n                      ans = allData[i].dataDetailsList[j].dataContent;\r\n                    }\r\n                  }\r\n                }\r\n                paramData[allData[i].dataDetailsList[j].formTemplateId] = ans;\r\n                // console.log(paramData);\r\n                arrData.push(paramId);\r\n                arrData.push(paramData);\r\n              }\r\n              let result = Object.assign(...arrData);\r\n              arrData = [];\r\n              this.tableData.push(result);\r\n            }\r\n                          \r\n            }\r\n          })\r\n        );\r\n    },\r\n  },\r\n\r\n  //钩子函数，页面创建时\r\n  created() {\r\n    sessionStorage.setItem(\"TagActiveName\", \"third\");\r\n    this.formId = this.$route.params.id;\r\n    //请求表头表身数据\r\n    this.gettableDatas();\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.fd-head {\r\n  margin-top: 5px;\r\n  margin-bottom: 5px;\r\n}\r\n.fd-tr > td {\r\n  width: 100px;\r\n  height: 40px;\r\n  border-width: 0px;\r\n  border-radius: 5px;\r\n  cursor: pointer; /* 鼠标移入按钮范围时出现手势 */\r\n  outline: none; /*不显示轮廓线 */\r\n  color: #333333; /* 字体颜色 */\r\n  font-size: 17px; /* 字体大小 */\r\n}\r\n.fd-tr > td:hover {\r\n  /* 鼠标移入按钮范围时改变颜色 */\r\n  background: #ffffff;\r\n}\r\n/* element 表头颜色 */\r\n.el-table th {\r\n  background: #fdead9;\r\n}\r\n\r\n/* element 表身颜色  奇数*/\r\n.el-table tr {\r\n  background: #fbf6f3;\r\n}\r\n\r\n/* element 表身颜色  偶数*/\r\n.el-table--striped .el-table__body tr.el-table__row--striped td {\r\n  background: #fdeadc;\r\n}\r\n</style>","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"fd-all\"},[_c('el-dialog',{attrs:{\"title\":\"数据详情\",\"visible\":_vm.dialogVisible,\"width\":\"80%\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('div',{staticClass:\"fd-main\"},[_c('el-table',{attrs:{\"data\":_vm.tableData,\"stripe\":\"\"},on:{\"select-all\":_vm.getSelectAll,\"select\":_vm.getSelect,\"row-click\":_vm.getDetails}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"55\"}}),_vm._l((_vm.tableColumn),function(item,index){return _c('el-table-column',{key:index,staticStyle:{\"width\":\"'150'\"},attrs:{\"prop\":item.prop,\"label\":item.label,\"sortable\":\"\",\"fixed\":\"\"}})})],2)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"确 定\")])],1)]),_c('div',{staticClass:\"fd-head\"},[_c('tbody',[_c('tr',{staticClass:\"fd-tr\"},[_c('td',[_c('el-button',{staticClass:\"iconfont gd-shuaxin\",attrs:{\"type\":\"text\"},on:{\"click\":_vm.refreshData}},[_vm._v(\"刷新页面\")])],1),_c('td',[_c('el-button',{staticClass:\"iconfont gd-tianjia\",attrs:{\"type\":\"text\"},on:{\"click\":function($event){_vm.dialogVisible = true}}},[_vm._v(\"增加数据\")])],1),_c('td',[_c('el-button',{staticClass:\"iconfont gd-shanchu\",attrs:{\"type\":\"text\"},on:{\"click\":_vm.delData}},[_vm._v(\"删除数据\")])],1)])])]),_c('div',{staticClass:\"fd-main\"},[_c('el-table',{attrs:{\"data\":_vm.tableData,\"stripe\":\"\"},on:{\"select-all\":_vm.getSelectAll,\"select\":_vm.getSelect,\"row-click\":_vm.getDetails}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"55\"}}),_c('el-table-column',{attrs:{\"type\":\"index\",\"width\":\"55\"}}),_vm._l((_vm.tableColumn),function(item,index){return _c('el-table-column',{key:index,staticStyle:{\"width\":\"'150'\"},attrs:{\"prop\":item.prop,\"label\":item.label,\"sortable\":\"\"}})})],2)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./formdata.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./formdata.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./formdata.vue?vue&type=template&id=da246d70&scoped=true&\"\nimport script from \"./formdata.vue?vue&type=script&lang=js&\"\nexport * from \"./formdata.vue?vue&type=script&lang=js&\"\nimport style0 from \"./formdata.vue?vue&type=style&index=0&id=da246d70&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"da246d70\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./formdata.vue?vue&type=style&index=0&id=da246d70&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./formdata.vue?vue&type=style&index=0&id=da246d70&scoped=true&lang=css&\""],"sourceRoot":""}