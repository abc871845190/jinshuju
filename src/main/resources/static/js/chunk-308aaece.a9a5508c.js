(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-308aaece"],{2158:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_number_constructor__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("a9e3"),core_js_modules_es_number_constructor__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_number_constructor__WEBPACK_IMPORTED_MODULE_0__),C_Users_38675_Desktop_QForest_v4_2_5_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("2909"),_network_formdata_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("501c"),_components_EditPageComp_tablecomp_CheckBox_vue__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("850b"),_components_EditPageComp_tablecomp_Radio_vue__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("4161"),_components_EditPageComp_tablecomp_Select_vue__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("3e89"),_components_EditPageComp_tablecomp_TextBox_vue__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("f50a"),_components_EditPageComp_tablecomp_PicRadio_vue__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("e039"),_components_EditPageComp_tablecomp_PicCheckBox_vue__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("b547"),_utils_comp_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("be42"),_network_tabledata_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("65db");__webpack_exports__["a"]={components:{"t-checkbox":_components_EditPageComp_tablecomp_CheckBox_vue__WEBPACK_IMPORTED_MODULE_3__["a"],"t-radio":_components_EditPageComp_tablecomp_Radio_vue__WEBPACK_IMPORTED_MODULE_4__["a"],"t-select":_components_EditPageComp_tablecomp_Select_vue__WEBPACK_IMPORTED_MODULE_5__["a"],"t-textbox":_components_EditPageComp_tablecomp_TextBox_vue__WEBPACK_IMPORTED_MODULE_6__["a"],"t-picradio":_components_EditPageComp_tablecomp_PicRadio_vue__WEBPACK_IMPORTED_MODULE_7__["a"],"t-piccheckbox":_components_EditPageComp_tablecomp_PicCheckBox_vue__WEBPACK_IMPORTED_MODULE_8__["a"]},inject:["reload"],data:function(){return{dialogVisible:!1,tableColumn:[],tableData:[],multipleSelection:[],selectData:[],formId:"",form:[]}},methods:{getSelect:function(t){this.selectData=[];for(var e=0;e<t.length;e++)this.selectData.push(t[e].dataId)},getSelectAll:function(t){this.getSelect(t)},getDetails:function(t){console.log(t)},refreshData:function(){this.reload()},addData:function(){},delData:function(){var t=this;Object(_network_formdata_js__WEBPACK_IMPORTED_MODULE_2__["a"])(this.selectData).then((function(e){console.log(e),1==e.code&&t.reload()}))},gettableDatas:function gettableDatas(){var _this2=this;this.axios.all([Object(_network_formdata_js__WEBPACK_IMPORTED_MODULE_2__["e"])(this.formId),Object(_network_formdata_js__WEBPACK_IMPORTED_MODULE_2__["d"])(this.formId)]).then(this.axios.spread((function(res1,res2){var allData=res1.data,allQuestion=res2.data,ans=[],arrData=[];for(var questionIndex in allQuestion){var paramOption={};paramOption.prop=allQuestion[questionIndex].formTemplateId+"",paramOption.label=allQuestion[questionIndex].templateTitle,_this2.tableColumn.push(paramOption)}if(void 0===allData[0])_this2.$message({showClose:!0,message:"暂无数据哟~(#^.^#)",type:"warning"});else for(var i in allData){for(var j in allQuestion){var paramId={},paramData={};for(var k in paramId["dataId"]=allData[i].dataId,allData[i].dataDetailsList)if(allQuestion[k].formTemplateId==allData[i].dataDetailsList[j].formTemplateId)if("radio"==allQuestion[k].templateName||"select"==allQuestion[k].templateName||"picradio"==allQuestion[k].templateName)"[]"!=allData[i].dataDetailsList[j].dataContent&&""!=allData[i].dataDetailsList[j].dataContent?(ans=JSON.parse(allData[i].dataDetailsList[j].dataContent),ans=ans.value):(ans=JSON.parse('{"key":0,"value":""}'),ans=ans.value);else if("checkbox"==allQuestion[k].templateName||"piccheckbox"==allQuestion[k].templateName)if("[]"!=allData[i].dataDetailsList[j].dataContent&&""!=allData[i].dataDetailsList[j].dataContent){var _result=eval(allData[i].dataDetailsList[j].dataContent);for(var content in ans="",_result)Number(content)===_result.length-1?ans+=_result[content].value:ans+=_result[content].value+"、"}else ans=JSON.parse('{"key":0,"value":""}'),ans=ans.value;else ans=allData[i].dataDetailsList[j].dataContent;paramData[allData[i].dataDetailsList[j].formTemplateId]=ans,arrData.push(paramId),arrData.push(paramData)}var result=Object.assign.apply(Object,Object(C_Users_38675_Desktop_QForest_v4_2_5_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__["a"])(arrData));arrData=[],_this2.tableData.push(result)}})))},iscomponent:function(t){return _utils_comp_js__WEBPACK_IMPORTED_MODULE_9__["a"].is_table_comp(t)},commit:function(){var t=this;this.dialogVisible=!1,_utils_comp_js__WEBPACK_IMPORTED_MODULE_9__["a"].checkRequired(this.form)?Object(_network_tabledata_js__WEBPACK_IMPORTED_MODULE_10__["g"])(_utils_comp_js__WEBPACK_IMPORTED_MODULE_9__["a"].commitForm(this.form)).then((function(){t.reload()})):this.$message({showClose:!0,message:"必填项不能为空(带*选项)!",type:"error"})},exportExcel:function(){console.log(this.tableColumn),console.log(this.tableData);var t="";for(var e in this.tableColumn)Number(e)===this.tableColumn.length-1?t+=this.tableColumn[e].label+"\n":t+=this.tableColumn[e].label+",";for(var a=0;a<this.tableData.length;a++){for(var o in console.log(this.tableData[a]),this.tableColumn)t+="".concat(this.tableData[a][this.tableColumn[o].prop]+"\t",",");t+="\n"}console.log(t);var _="data:text/csv;charset=utf-8,\ufeff"+encodeURIComponent(t),r=document.createElement("a");r.href=_,r.download=this.$store.getters["tabledata/form"].formTitle+".csv",r.click()}},created:function created(){var _this4=this;sessionStorage.setItem("TagActiveName","third"),this.formId=this.$route.params.id,this.gettableDatas(),Object(_network_tabledata_js__WEBPACK_IMPORTED_MODULE_10__["e"])(this.$route.params.id).then((function(res){var index=0,arr=[];while(index<res.data.templateList.length){for(var i in res.data.templateList)res.data.templateList[i].templateCount===index&&arr.push(res.data.templateList[i]);index++}for(var r in res.data.templateList=arr,res.data.templateList)null!==res.data.templateList[r].templateContent&&void 0!==res.data.templateList[r].templateContent&&""!==res.data.templateList[r].templateContent&&(res.data.templateList[r].templateContent=eval(res.data.templateList[r].templateContent),res.data.templateList[r].templateImgUrl=eval(res.data.templateList[r].templateImgUrl)),"checkbox"===res.data.templateList[r].templateName||"piccheckbox"===res.data.templateList[r].templateName?res.data.templateList[r].data=[]:res.data.templateList[r].data="";_this4.form=res.data}))}}},"25f0":function(t,e,a){"use strict";var o=a("6eeb"),_=a("825a"),r=a("d039"),n=a("ad6d"),l="toString",i=RegExp.prototype,s=i[l],c=r((function(){return"/a/b"!=s.call({source:"a",flags:"b"})})),u=s.name!=l;(c||u)&&o(RegExp.prototype,l,(function(){var t=_(this),e=String(t.source),a=t.flags,o=String(void 0===a&&t instanceof RegExp&&!("flags"in i)?n.call(t):a);return"/"+e+"/"+o}),{unsafe:!0})},2909:function(t,e,a){"use strict";function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,o=new Array(e);a<e;a++)o[a]=t[a];return o}function _(t){if(Array.isArray(t))return o(t)}a.d(e,"a",(function(){return i}));a("a4d3"),a("e01a"),a("d28b"),a("a630"),a("d3b7"),a("3ca3"),a("ddb0");function r(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}a("fb6a"),a("b0c0"),a("25f0");function n(t,e){if(t){if("string"===typeof t)return o(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?o(t,e):void 0}}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t){return _(t)||r(t)||n(t)||l()}},"3b1f":function(t,e,a){"use strict";var o=a("7f71"),_=a.n(o);_.a},"3eae":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fd-all"},[a("el-dialog",{staticClass:"form-table",attrs:{title:"添加数据",visible:t.dialogVisible,width:"40%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[t._l(t.form.templateList,(function(e,o){return a(t.iscomponent(e.templateName),{key:o,tag:"component",attrs:{data:e,index:o+1}})})),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.commit}},[t._v("确 定")])],1)],2),a("div",{staticClass:"fd-head"},[a("tbody",[a("tr",{staticClass:"fd-tr"},[a("td",[a("el-button",{staticClass:"iconfont gd-shuaxin",attrs:{type:"text"},on:{click:t.refreshData}},[t._v("刷新页面")])],1),a("td",[a("el-button",{staticClass:"iconfont gd-tianjia",attrs:{type:"text"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("增加数据")])],1),a("td",[a("el-button",{staticClass:"iconfont gd-shanchu",attrs:{type:"text"},on:{click:t.delData}},[t._v("删除数据")])],1),a("td",[a("el-button",{staticClass:"iconfont gd-shanchu",attrs:{type:"text"},on:{click:t.exportExcel}},[t._v("导出excel")])],1)])])]),a("div",{staticClass:"fd-main"},[a("el-table",{attrs:{data:t.tableData,stripe:""},on:{"select-all":t.getSelectAll,select:t.getSelect,"row-click":t.getDetails}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{type:"index",width:"55"}}),t._l(t.tableColumn,(function(t,e){return a("el-table-column",{key:e,staticStyle:{width:"'150'"},attrs:{prop:t.prop,label:t.label,sortable:""}})}))],2)],1)],1)},_=[],r=a("2158"),n=r["a"],l=(a("3b1f"),a("2877")),i=Object(l["a"])(n,o,_,!1,null,"b3bfe6bc",null);e["default"]=i.exports},"4df4":function(t,e,a){"use strict";var o=a("0366"),_=a("7b0b"),r=a("9bdd"),n=a("e95a"),l=a("50c4"),i=a("8418"),s=a("35a1");t.exports=function(t){var e,a,c,u,d,m,p=_(t),f="function"==typeof this?this:Array,b=arguments.length,D=b>1?arguments[1]:void 0,h=void 0!==D,E=s(p),v=0;if(h&&(D=o(D,b>2?arguments[2]:void 0,2)),void 0==E||f==Array&&n(E))for(e=l(p.length),a=new f(e);e>v;v++)m=h?D(p[v],v):p[v],i(a,v,m);else for(u=E.call(p),d=u.next,a=new f;!(c=d.call(u)).done;v++)m=h?r(u,D,[c.value,v],!0):c.value,i(a,v,m);return a.length=v,a}},"501c":function(t,e,a){"use strict";a.d(e,"d",(function(){return _})),a.d(e,"c",(function(){return r})),a.d(e,"e",(function(){return n})),a.d(e,"a",(function(){return l})),a.d(e,"b",(function(){return i}));var o=a("1bab");function _(t){return Object(o["a"])({url:"/FormController/getTemplates/"+t})}function r(t){return Object(o["a"])({url:"/FormController/form/"+t})}function n(t){return Object(o["a"])({url:"/DataController/getAllData/"+t})}function l(t){return Object(o["a"])({method:"delete",url:"/DataController/deleteBatch?id="+t})}function i(t){return Object(o["a"])({url:"/DataController/getDataCountDaily/"+t})}},"7f71":function(t,e,a){},a630:function(t,e,a){var o=a("23e7"),_=a("4df4"),r=a("1c7e"),n=!r((function(t){Array.from(t)}));o({target:"Array",stat:!0,forced:n},{from:_})},b0c0:function(t,e,a){var o=a("83ab"),_=a("9bf2").f,r=Function.prototype,n=r.toString,l=/^\s*function ([^ (]*)/,i="name";o&&!(i in r)&&_(r,i,{configurable:!0,get:function(){try{return n.call(this).match(l)[1]}catch(t){return""}}})},fb6a:function(t,e,a){"use strict";var o=a("23e7"),_=a("861d"),r=a("e8b5"),n=a("23cb"),l=a("50c4"),i=a("fc6a"),s=a("8418"),c=a("b622"),u=a("1dde"),d=a("ae40"),m=u("slice"),p=d("slice",{ACCESSORS:!0,0:0,1:2}),f=c("species"),b=[].slice,D=Math.max;o({target:"Array",proto:!0,forced:!m||!p},{slice:function(t,e){var a,o,c,u=i(this),d=l(u.length),m=n(t,d),p=n(void 0===e?d:e,d);if(r(u)&&(a=u.constructor,"function"!=typeof a||a!==Array&&!r(a.prototype)?_(a)&&(a=a[f],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return b.call(u,m,p);for(o=new(void 0===a?Array:a)(D(p-m,0)),c=0;m<p;m++,c++)m in u&&s(o,c,u[m]);return o.length=c,o}})}}]);
//# sourceMappingURL=chunk-308aaece.a9a5508c.js.map