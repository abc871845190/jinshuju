(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-239a381e"],{"0254":function(t,e,a){},"051a":function(t,e,a){"use strict";var i=a("2b14"),n=a.n(i);n.a},"0c47":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticClass:"header",attrs:{type:"flex"}},[a("el-col",{staticClass:"hidden-xs-only",staticStyle:{width:"290px"},attrs:{span:6}},[a("div",{staticClass:"side-bar-left"},[a("h4",{staticStyle:{float:"left","margin-top":"10px","margin-left":"5px"}},[t._v(" 添加题目 ")]),a("br"),a("br"),t._l(t.subjectData,(function(t,e){return a("subjecttype",{key:e,attrs:{data:t.data,title:t.type}})}))],2)]),a("el-col",[a("div",{staticClass:"content"},[a("edittable",{on:{eComponent:t.getComponent}})],1)]),a("el-col",{staticClass:"hidden-xs-only",staticStyle:{width:"290px"},attrs:{span:6}},[a("div",{staticClass:"side-bar-right"},[a("el-tabs",{attrs:{type:"card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"编辑题目",name:"first"}},[a("div",{style:"height:"+(t.window_h-195)+"px;overflow-y:scroll;"},[a(t.component,{tag:"component"})],1)]),a("el-tab-pane",{attrs:{label:"问卷样式",name:"second"}})],1),a("el-button",{staticStyle:{position:"absolute",bottom:"10px",left:"10px",width:"95%",height:"30px","line-height":"8px"},attrs:{type:"primary"},on:{click:t.save_table}},[t._v("保存问卷")])],1)])],1)},n=[],l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("el-header",{staticStyle:{height:"20px","font-size":"14px","text-align":"left",padding:"0 10px"}},[t._v(t._s(t.title))]),a("el-main",{staticStyle:{padding:"0 10px"}},[a("el-row",{attrs:{gutter:10}},t._l(t.data1,(function(e,i){return a("el-col",{key:i,attrs:{span:12}},[a("el-button",{staticStyle:{margin:"5px 0px",width:"125px","text-align":"left"},attrs:{icon:e.icon+" iconfont",size:"medium"},nativeOn:{click:function(a){return t.add(e)}}},[t._v(t._s(e.title))])],1)})),1)],1)],1)},s=[],o=a("be42"),r={data:function(){return{data1:this.data}},props:{data:Array,title:String},methods:{add:function(t){this.$store.commit("tabledata/increment",JSON.parse(JSON.stringify(o["a"].add_table_comp(t))))}}},c=r,u=(a("89d5"),a("2877")),d=Object(u["a"])(c,l,s,!1,null,null,null),m=d.exports,p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"all-table"},[a("div",{class:{selected:t.headSelect}},[a("t-head",{key:t.load,attrs:{formTitle:t.form.formTitle,formDesc:t.form.formDesc},on:{"update:formTitle":function(e){return t.$set(t.form,"formTitle",e)},"update:form-title":function(e){return t.$set(t.form,"formTitle",e)},"update:formDesc":function(e){return t.$set(t.form,"formDesc",e)},"update:form-desc":function(e){return t.$set(t.form,"formDesc",e)}},nativeOn:{click:function(e){return t.select_comp(null)}}})],1),a("draggable",{attrs:{sort:!0,disabled:t.isDraggable,"force-fallback":"true",animation:"500",filter:".t-head"},on:{start:t.dragStart,end:t.dragEnd},model:{value:t.item,callback:function(e){t.item=e},expression:"item"}},[a("transition-group",t._l(t.form.templateList,(function(e,i){return a("div",{key:e.templateCount,class:{selected:e.selected},staticStyle:{position:"relative"},on:{click:function(e){return t.select_comp(i)}}},[a(t.iscomponent(e.templateName),{key:t.reload,tag:"component",staticStyle:{"pointer-events":"none"},attrs:{data:e,index:i+1}}),"head"!==e.templateName?a("div",{directives:[{name:"show",rawName:"v-show",value:e.selected,expression:"item.selected"}],staticStyle:{position:"absolute",right:"10px",bottom:"5px"}},[a("el-button",{staticClass:"edit-btn",staticStyle:{display:"block"},attrs:{type:"primary",icon:"el-icon-top",size:"mini"},nativeOn:{mouseenter:function(e){t.isDraggable=!0},mouseleave:function(e){t.isDraggable=!1},click:function(e){return t.moveUp(i)}}}),a("el-button",{staticClass:"edit-btn",staticStyle:{display:"block",margin:"5px 0"},attrs:{type:"primary",icon:"el-icon-bottom",size:"mini"},nativeOn:{mouseenter:function(e){t.isDraggable=!0},mouseleave:function(e){t.isDraggable=!1},click:function(e){return t.moveDown(i)}}}),a("el-button",{staticClass:"edit-btn",staticStyle:{display:"block",margin:"5px 0",color:"#e34152"},attrs:{type:"primary",icon:"el-icon-delete-solid",size:"mini"},nativeOn:{mouseenter:function(e){t.isDraggable=!0},mouseleave:function(e){t.isDraggable=!1},click:function(a){return t.compDelete(e,i)}}})],1):t._e()],1)})),0)],1)],1)},f=[],h=a("fd51"),v=a("850b"),b=a("4161"),g=a("3e89"),x=a("f50a"),C=a("e039"),_=a("b547"),$=a("65db"),y={components:{"t-head":h["a"],"t-checkbox":v["a"],"t-radio":b["a"],"t-select":g["a"],"t-textbox":x["a"],"t-picradio":C["a"],"t-piccheckbox":_["a"]},data:function(){return{reload:0,item:[],headSelect:!1,load:0,isDraggable:!1}},methods:{select_comp:function(t){if(null===t)if(!0===this.headSelect)this.headSelect=!1,this.$emit("eComponent","");else{for(var e=0;e<this.form.templateList.length;e++)this.form.templateList[e].selected=!1;this.headSelect=!0,this.$emit("eComponent","head")}else if(void 0!=this.form.templateList[t])if(1==this.form.templateList[t].selected){for(var a=0;a<this.form.templateList.length;a++)this.form.templateList[a].selected=!1;this.$emit("eComponent","")}else{for(var i=0;i<this.form.templateList.length;i++)this.form.templateList[i].selected=!1;this.headSelect=!1,this.form.templateList[t].selected=!0,this.$emit("eComponent",this.form.templateList[t].templateName),this.$store.commit("tabledata/setindex",t)}},moveUp:function(t){0!=t&&(this.$store.commit("tabledata/moveup",t),this.$store.commit("tabledata/setindex",t-1),this.reload++)},moveDown:function(t){this.form.templateList.length!=t+1&&(this.$store.commit("tabledata/movedown",t),this.$store.commit("tabledata/setindex",t+1),this.reload++)},compDelete:function(t,e){var a=this.$store.getters["tabledata/deletePicArr"];for(var i in a)if(a[i].templateCount===t.templateCount)for(var n in a[i].option)Object($["b"])(a[i].option[n]);this.$store.commit("tabledata/delete",e),this.$emit("eComponent",""),this.reload++},iscomponent:function(t){return o["a"].is_table_comp(t)},dragStart:function(){this.item=this.$store.getters["tabledata/form"].templateList,this.reload++},dragEnd:function(t){this.$store.commit("tabledata/update",this.item);for(var e=t.newIndex,a=0;a<this.form.templateList.length;a++)this.form.templateList[a].selected=!1;this.headSelect=!1,this.form.templateList[e].selected=!0,this.$emit("eComponent",this.form.templateList[e].templateName),this.$store.commit("tabledata/setindex",e),this.reload++}},computed:{form:function(){return this.$store.getters["tabledata/form"]}},created:function(){this.item=this.$store.getters["tabledata/form"].templateList},mounted:function(){for(var t=0;t<this.form.templateList.length;t++)this.form.templateList[t].selected=!1}},q=y,k=(a("c6db"),Object(u["a"])(q,p,f,!1,null,null,null)),w=k.exports,O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"e-head"},[a("div",{staticClass:"text"},[t._v("标题")]),a("el-input",{attrs:{size:"small"},model:{value:t.form.formTitle,callback:function(e){t.$set(t.form,"formTitle",e)},expression:"form.formTitle"}}),a("div",{staticClass:"text"},[t._v("标题描述")]),a("el-input",{attrs:{size:"small"},model:{value:t.form.formDesc,callback:function(e){t.$set(t.form,"formDesc",e)},expression:"form.formDesc"}})],1)},S=[],R={data:function(){return{}},computed:{form:function(){return this.$store.getters["tabledata/form"]}}},B=R,T=(a("051a"),Object(u["a"])(B,O,S,!1,null,"4488966d",null)),D=T.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"e-checkbox"},[a("div",{staticClass:"text"},[t._v("标题")]),a("el-input",{attrs:{size:"small"},model:{value:t.data.templateTitle,callback:function(e){t.$set(t.data,"templateTitle",e)},expression:"data.templateTitle"}}),a("div",{staticClass:"text"},[t._v("标题描述")]),a("el-input",{attrs:{size:"small"},model:{value:t.data.templateDesc,callback:function(e){t.$set(t.data,"templateDesc",e)},expression:"data.templateDesc"}}),a("div",{staticClass:"text"},[t._v("选项")]),t._l(t.data.templateContent,(function(e,i){return a("div",{key:i},[a("el-input",{staticStyle:{width:"200px",display:"inline-block"},attrs:{size:"small",placeholder:e.value},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}}),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(e){return t.delete_option(i)}}})],1)})),a("el-row",[a("el-col",{attrs:{span:12,offset:6}},[a("el-button",{attrs:{size:"mini"},on:{click:t.add_option}},[t._v("添加项")])],1)],1),a("el-switch",{staticStyle:{margin:"20px"},attrs:{"active-text":"是否必填","active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:t.isRequire},model:{value:t.requireBoolean,callback:function(e){t.requireBoolean=e},expression:"requireBoolean"}})],2)},I=[],z=(a("a434"),{data:function(){return{newOption:[],requireBoolean:!0}},methods:{add_option:function(){var t=o["a"].getNumBycircluerSort(this.data.templateContent);this.data.templateContent.push({key:t,value:"空"}),this.newOption.push(t)},delete_option:function(t){if(null!==this.data.formTemplateId&&void 0!==this.data.formTemplateId&&""!==this.data.formTemplateId){var e=!1;for(var a in this.newOption)if(this.newOption[a]===this.data.templateContent[t].key){e=!0,this.newOption.splice(a,1);break}!1===e&&Object($["c"])(this.data.formTemplateId,this.data.templateContent[t])}this.data.templateContent.splice(t,1)},isRequire:function(){!1===this.requireBoolean?this.$store.commit("tabledata/setRequire",0):this.$store.commit("tabledata/setRequire",1)}},computed:{data:function(){return this.$store.getters["tabledata/data"]},getRequire:function(){return this.$store.getters["tabledata/data"].templateRequire}},watch:{getRequire:function(t){this.requireBoolean=0!==t}},mounted:function(){0===this.$store.getters["tabledata/data"].templateRequire?this.requireBoolean=!1:this.requireBoolean=!0}}),L=z,N=(a("9d0c"),Object(u["a"])(L,j,I,!1,null,"57f29b1d",null)),U=N.exports,E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"e-radio"},[a("div",{staticClass:"text"},[t._v("标题")]),a("el-input",{attrs:{size:"small"},model:{value:t.data.templateTitle,callback:function(e){t.$set(t.data,"templateTitle",e)},expression:"data.templateTitle"}}),a("div",{staticClass:"text"},[t._v("标题描述")]),a("el-input",{attrs:{size:"small"},model:{value:t.data.templateDesc,callback:function(e){t.$set(t.data,"templateDesc",e)},expression:"data.templateDesc"}}),a("div",{staticClass:"text"},[t._v("选项")]),t._l(t.data.templateContent,(function(e,i){return a("div",{key:i},[a("el-input",{staticStyle:{width:"200px",display:"inline-block"},attrs:{size:"small",placeholder:e.value},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}}),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(e){return t.delete_option(i)}}})],1)})),a("el-row",[a("el-col",{attrs:{span:12,offset:6}},[a("el-button",{attrs:{size:"mini"},on:{click:t.add_option}},[t._v("添加项")])],1)],1),a("el-switch",{staticStyle:{margin:"20px"},attrs:{"active-text":"是否必填","active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:t.isRequire},model:{value:t.requireBoolean,callback:function(e){t.requireBoolean=e},expression:"requireBoolean"}})],2)},A=[],P={data:function(){return{newOption:[],requireBoolean:!0}},methods:{add_option:function(){var t=o["a"].getNumBycircluerSort(this.data.templateContent);this.data.templateContent.push({key:t,value:"空"})},delete_option:function(t){if(null!==this.data.formTemplateId&&void 0!==this.data.formTemplateId&&""!==this.data.formTemplateId){var e=!1;for(var a in this.newOption)if(this.newOption[a]===this.data.templateContent[t].key){e=!0,this.newOption.splice(a,1);break}!1===e&&Object($["c"])(this.data.formTemplateId,this.data.templateContent[t])}this.data.templateContent.splice(t,1)},isRequire:function(){!1===this.requireBoolean?this.$store.commit("tabledata/setRequire",0):this.$store.commit("tabledata/setRequire",1)}},computed:{data:function(){return this.$store.getters["tabledata/data"]},getRequire:function(){return this.$store.getters["tabledata/data"].templateRequire}},watch:{getRequire:function(t){this.requireBoolean=0!==t}},mounted:function(){0===this.$store.getters["tabledata/data"].templateRequire?this.requireBoolean=!1:this.requireBoolean=!0}},J=P,F=(a("b9cd"),Object(u["a"])(J,E,A,!1,null,"01479ba0",null)),M=F.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"e-select"},[a("div",{staticClass:"text"},[t._v("标题")]),a("el-input",{attrs:{size:"small"},model:{value:t.data.templateTitle,callback:function(e){t.$set(t.data,"templateTitle",e)},expression:"data.templateTitle"}}),a("div",{staticClass:"text"},[t._v("标题描述")]),a("el-input",{attrs:{size:"small"},model:{value:t.data.templateDesc,callback:function(e){t.$set(t.data,"templateDesc",e)},expression:"data.templateDesc"}}),a("div",{staticClass:"text"},[t._v("选项")]),t._l(t.data.templateContent,(function(e,i){return a("div",{key:i},[a("el-input",{staticStyle:{width:"200px",display:"inline-block"},attrs:{size:"small",placeholder:e.value},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}}),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(e){return t.delete_option(i)}}})],1)})),a("el-row",[a("el-col",{attrs:{span:12,offset:6}},[a("el-button",{attrs:{size:"mini"},on:{click:t.add_option}},[t._v("添加项")])],1)],1),a("el-switch",{staticStyle:{margin:"20px"},attrs:{"active-text":"是否必填","active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:t.isRequire},model:{value:t.requireBoolean,callback:function(e){t.requireBoolean=e},expression:"requireBoolean"}})],2)},H=[],G={data:function(){return{newOption:[],requireBoolean:!0}},methods:{add_option:function(){var t=o["a"].getNumBycircluerSort(this.data.templateContent);this.data.templateContent.push({key:t,value:"空"})},delete_option:function(t){if(null!==this.data.formTemplateId&&void 0!==this.data.formTemplateId&&""!==this.data.formTemplateId){var e=!1;for(var a in this.newOption)if(this.newOption[a]===this.data.templateContent[t].key){e=!0,this.newOption.splice(a,1);break}!1===e&&Object($["c"])(this.data.formTemplateId,this.data.templateContent[t])}this.data.templateContent.splice(t,1)},isRequire:function(){!1===this.requireBoolean?this.$store.commit("tabledata/setRequire",0):this.$store.commit("tabledata/setRequire",1)}},computed:{data:function(){return this.$store.getters["tabledata/data"]},getRequire:function(){return this.$store.getters["tabledata/data"].templateRequire}},watch:{getRequire:function(t){this.requireBoolean=0!==t}},mounted:function(){0===this.$store.getters["tabledata/data"].templateRequire?this.requireBoolean=!1:this.requireBoolean=!0}},K=G,Q=(a("94a7"),Object(u["a"])(K,V,H,!1,null,"21beb52a",null)),W=Q.exports,X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"e-checkbox"},[a("div",{staticClass:"text"},[t._v("标题")]),a("el-input",{attrs:{size:"small"},model:{value:t.data.templateTitle,callback:function(e){t.$set(t.data,"templateTitle",e)},expression:"data.templateTitle"}}),a("div",{staticClass:"text"},[t._v("标题描述")]),a("el-input",{attrs:{size:"small"},model:{value:t.data.templateDesc,callback:function(e){t.$set(t.data,"templateDesc",e)},expression:"data.templateDesc"}}),a("el-switch",{staticStyle:{margin:"20px"},attrs:{"active-text":"是否必填","active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:t.isRequire},model:{value:t.requireBoolean,callback:function(e){t.requireBoolean=e},expression:"requireBoolean"}})],1)},Y=[],Z={data:function(){return{requireBoolean:!0}},methods:{isRequire:function(){!1===this.requireBoolean?this.$store.commit("tabledata/setRequire",0):this.$store.commit("tabledata/setRequire",1)}},computed:{data:function(){return this.$store.getters["tabledata/data"]},getRequire:function(){return this.$store.getters["tabledata/data"].templateRequire}},watch:{getRequire:function(t){this.requireBoolean=0!==t}},mounted:function(){0===this.$store.getters["tabledata/data"].templateRequire?this.requireBoolean=!1:this.requireBoolean=!0}},tt=Z,et=(a("58fb"),Object(u["a"])(tt,X,Y,!1,null,"c3cf7e4a",null)),at=et.exports,it=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"e-picradio"},[a("div",{staticClass:"text"},[t._v("标题")]),a("el-input",{attrs:{size:"small"},model:{value:t.data.templateTitle,callback:function(e){t.$set(t.data,"templateTitle",e)},expression:"data.templateTitle"}}),a("div",{staticClass:"text"},[t._v("标题描述")]),a("el-input",{attrs:{size:"small"},model:{value:t.data.templateDesc,callback:function(e){t.$set(t.data,"templateDesc",e)},expression:"data.templateDesc"}}),a("div",{staticClass:"text"},[t._v("选项")]),t._l(t.data.templateContent,(function(e,i){return a("div",{key:i,staticClass:"picradio"},[a("el-image",{staticClass:"image",attrs:{src:t.getPicUrl(i),"preview-src-list":t.data.templateImgUrl.value}}),a("el-input",{staticClass:"input",attrs:{type:"textarea",autosize:t.areasize,size:"large",resize:"none",placeholder:"请输入"},model:{value:t.data.templateContent[i].value,callback:function(e){t.$set(t.data.templateContent[i],"value",e)},expression:"data.templateContent[index].value"}}),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(e){return t.delete_option(i)}}})],1)})),a("el-upload",{ref:"upload",staticClass:"upload-demo upload_div",attrs:{drag:"",action:"http://jinshuju.max3.fgnwctvip.com/FormController/uploadImg",multiple:"","auto-upload":!1,"on-change":t.getList,"file-list":t.fileList,"show-file-list":!1,accept:".png,.jpeg,.jpg,.gif"}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(" 只能上传jpg/png文件，且不超过500kb ")])]),a("el-switch",{staticStyle:{margin:"20px"},attrs:{"active-text":"是否必填","active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:t.isRequire},model:{value:t.requireBoolean,callback:function(e){t.requireBoolean=e},expression:"requireBoolean"}})],2)},nt=[],lt=(a("baa5"),a("fb6a"),a("b0c0"),a("ac1f"),a("5319"),{data:function(){return{fileList:[],areasize:{minRows:1,maxRows:3},requireBoolean:!0}},methods:{getList:function(t,e){var a=this,i=t.name.substr(t.name.lastIndexOf(".")+1);if("gif"===i||"jpg"===i||"jpeg"===i||"png"===i){this.fileList=e;var n=new FormData;n.append("file",t.raw),Object($["h"])(n).then((function(e){var i=o["a"].getNumBycircluerSort(a.data.templateContent),n=a.$store.getters["tabledata/deletePicArr"],l=!1;for(var s in n)if(n[s].templateCount===a.data.templateCount){n[s].option.push(e.data.replace(/\\/g,"/")),l=!0;break}!1===l&&n.push({templateCount:a.data.templateCount,option:[e.data.replace(/\\/g,"/")]}),a.data.templateContent.push({key:i,value:String(t.uid)}),console.log(a.$store.state.getURL),a.data.templateImgUrl.push({key:i,value:a.$store.state.getURL+e.data.replace(/\\/g,"/")})}))}else alert("文件格式不符")},getPicUrl:function(t){return this.data.templateImgUrl[t].value},delete_option:function(t){null!==this.data.formTemplateId&&void 0!==this.data.formTemplateId&&""!==this.data.formTemplateId&&Object($["c"])(this.data.formTemplateId,this.data.templateContent[t]);var e=this.data.templateImgUrl[t].value;Object($["b"])(e.slice(e.lastIndexOf("img")-1)),this.data.templateContent.splice(t,1),this.fileList.splice(t,1),this.data.templateImgUrl.splice(t,1)},isRequire:function(){!1===this.requireBoolean?this.$store.commit("tabledata/setRequire",0):this.$store.commit("tabledata/setRequire",1)}},computed:{data:function(){return this.$store.getters["tabledata/data"]},newOption:function(){return this.$store.getters["tabledata/newOption"]},getRequire:function(){return this.$store.getters["tabledata/data"].templateRequire}},watch:{getRequire:function(t){this.requireBoolean=0!==t}},mounted:function(){0===this.$store.getters["tabledata/data"].templateRequire?this.requireBoolean=!1:this.requireBoolean=!0}}),st=lt,ot=(a("24b1"),Object(u["a"])(st,it,nt,!1,null,"4e3d1440",null)),rt=ot.exports,ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"e-piccheckbox"},[a("div",{staticClass:"text"},[t._v("标题")]),a("el-input",{attrs:{size:"small"},model:{value:t.data.templateTitle,callback:function(e){t.$set(t.data,"templateTitle",e)},expression:"data.templateTitle"}}),a("div",{staticClass:"text"},[t._v("标题描述")]),a("el-input",{attrs:{size:"small"},model:{value:t.data.templateDesc,callback:function(e){t.$set(t.data,"templateDesc",e)},expression:"data.templateDesc"}}),a("div",{staticClass:"text"},[t._v("选项")]),t._l(t.data.templateContent,(function(e,i){return a("div",{key:i,staticClass:"piccheckbox"},[a("el-image",{staticClass:"image",attrs:{src:t.getPicUrl(i),"preview-src-list":t.data.templateImgUrl.value}}),a("el-input",{staticClass:"input",attrs:{type:"textarea",autosize:t.areasize,size:"large",resize:"none",placeholder:"请输入"},model:{value:t.data.templateContent[i].value,callback:function(e){t.$set(t.data.templateContent[i],"value",e)},expression:"data.templateContent[index].value"}}),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(e){return t.delete_option(i)}}})],1)})),a("el-upload",{ref:"upload",staticClass:"upload-demo upload_div",attrs:{drag:"",action:"http://jinshuju.max3.fgnwctvip.com/FormController/uploadImg",multiple:"","auto-upload":!1,"on-change":t.getList,"file-list":t.fileList,"show-file-list":!1,accept:".png,.jpeg,.jpg,.gif"}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(" 只能上传jpg/png文件，且不超过500kb ")])]),a("el-switch",{staticStyle:{margin:"20px"},attrs:{"active-text":"是否必填","active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:t.isRequire},model:{value:t.requireBoolean,callback:function(e){t.requireBoolean=e},expression:"requireBoolean"}})],2)},ut=[],dt={data:function(){return{fileList:[],areasize:{minRows:1,maxRows:3},requireBoolean:!0}},methods:{getList:function(t,e){var a=this,i=t.name.substr(t.name.lastIndexOf(".")+1);if("gif"===i||"jpg"===i||"jpeg"===i||"png"===i){this.fileList=e;var n=new FormData;n.append("file",t.raw),Object($["h"])(n).then((function(e){var i=o["a"].getNumBycircluerSort(a.data.templateContent),n=a.$store.getters["tabledata/deletePicArr"],l=!1;for(var s in n)if(n[s].templateCount===a.data.templateCount){n[s].option.push(e.data.replace(/\\/g,"/")),l=!0;break}!1===l&&n.push({templateCount:a.data.templateCount,option:[e.data.replace(/\\/g,"/")]}),a.data.templateContent.push({key:i,value:String(t.uid)}),a.data.templateImgUrl.push({key:i,value:a.$store.state.getURL+e.data.replace(/\\/g,"/")})}))}else alert("文件格式不符")},getPicUrl:function(t){return this.data.templateImgUrl[t].value},delete_option:function(t){null!==this.data.formTemplateId&&void 0!==this.data.formTemplateId&&""!==this.data.formTemplateId&&Object($["c"])(this.data.formTemplateId,this.data.templateContent[t]);var e=this.data.templateImgUrl[t].value;Object($["b"])(e.slice(e.lastIndexOf("img")-1)),this.data.templateContent.splice(t,1),this.fileList.splice(t,1),this.data.templateImgUrl.splice(t,1)},isRequire:function(){!1===this.requireBoolean?this.$store.commit("tabledata/setRequire",0):this.$store.commit("tabledata/setRequire",1)}},computed:{data:function(){return this.$store.getters["tabledata/data"]},newOption:function(){return this.$store.getters["tabledata/newOption"]},getRequire:function(){return this.$store.getters["tabledata/data"].templateRequire}},watch:{getRequire:function(t){this.requireBoolean=0!==t}},mounted:function(){0===this.$store.getters["tabledata/data"].templateRequire?this.requireBoolean=!1:this.requireBoolean=!0}},mt=dt,pt=(a("986d"),Object(u["a"])(mt,ct,ut,!1,null,"1aec0287",null)),ft=pt.exports,ht=a("1bab");function vt(){return Object(ht["a"])({url:"/data/subject.json"})}var bt={components:{subjecttype:m,edittable:w,"e-head":D,"e-checkbox":U,"e-radio":M,"e-select":W,"e-textbox":at,"e-picradio":rt,"e-piccheckbox":ft},data:function(){return{subjectData:[],activeName:"first",component:""}},methods:{getComponent:function(t){this.component=o["a"].is_editpage_comp(t)},save_table:function(){var t=this;this.$store.commit("tabledata/cleanPicArr",[]),0!==this.$store.getters["tabledata/form"].templateList.length?this.$confirm("是否确认保存表单?","保存表单",{confirmButtonText:"保存",cancelButtonText:"取消",type:"warning"}).then((function(){console.log("-----------保存问卷----------------"),console.log(t.$store.getters["tabledata/form"]);var e=JSON.parse(JSON.stringify(t.$store.getters["tabledata/form"]));Object($["f"])(e).then((function(){t.$message({showClose:!0,message:"保存表单成功!",type:"success"}),t.$router.push("/home")}))})):this.$alert("表单题目不能空哦！","提示",{confirmButtonText:"确定"})}},computed:{window_h:function(){return this.$store.getters["windowheight/height"]}},created:function(){sessionStorage.setItem("TagActiveName","first"),window.addEventListener("beforeunload",(function(t){t.preventDefault(),t.returnValue="hello"}),!0)},mounted:function(){var t=this;Object($["e"])(this.$route.params.id).then((function(e){t.$store.commit("tabledata/insert",e.data),vt().then((function(e){t.subjectData=e[t.$store.getters["tabledata/form"].formType]})),console.log(t.$store.getters["tabledata/form"])}))},beforeDestroy:function(){this.$store.commit("tabledata/update",[]);var t=this.$store.getters["tabledata/deletePicArr"];for(var e in t)for(var a in t[e].option)Object($["b"])(t[e].option[a]);window.removeEventListener("beforeunload",(function(t){t.preventDefault(),t.returnValue="hello"}),!1)}},gt=bt,xt=(a("6551"),Object(u["a"])(gt,i,n,!1,null,"728e1fa2",null));e["default"]=xt.exports},"24b1":function(t,e,a){"use strict";var i=a("72ad"),n=a.n(i);n.a},"2b14":function(t,e,a){},"58fb":function(t,e,a){"use strict";var i=a("f066"),n=a.n(i);n.a},"5f9e":function(t,e,a){},"650b":function(t,e,a){},6551:function(t,e,a){"use strict";var i=a("b394"),n=a.n(i);n.a},"6df0":function(t,e,a){},"705f":function(t,e,a){},"72ad":function(t,e,a){},"89d5":function(t,e,a){"use strict";var i=a("6df0"),n=a.n(i);n.a},"94a7":function(t,e,a){"use strict";var i=a("5f9e"),n=a.n(i);n.a},"986d":function(t,e,a){"use strict";var i=a("650b"),n=a.n(i);n.a},"9d0c":function(t,e,a){"use strict";var i=a("0254"),n=a.n(i);n.a},a78d:function(t,e,a){},b0c0:function(t,e,a){var i=a("83ab"),n=a("9bf2").f,l=Function.prototype,s=l.toString,o=/^\s*function ([^ (]*)/,r="name";i&&!(r in l)&&n(l,r,{configurable:!0,get:function(){try{return s.call(this).match(o)[1]}catch(t){return""}}})},b394:function(t,e,a){},b9cd:function(t,e,a){"use strict";var i=a("a78d"),n=a.n(i);n.a},baa5:function(t,e,a){var i=a("23e7"),n=a("e58c");i({target:"Array",proto:!0,forced:n!==[].lastIndexOf},{lastIndexOf:n})},c6db:function(t,e,a){"use strict";var i=a("705f"),n=a.n(i);n.a},e58c:function(t,e,a){"use strict";var i=a("fc6a"),n=a("a691"),l=a("50c4"),s=a("a640"),o=a("ae40"),r=Math.min,c=[].lastIndexOf,u=!!c&&1/[1].lastIndexOf(1,-0)<0,d=s("lastIndexOf"),m=o("indexOf",{ACCESSORS:!0,1:0}),p=u||!d||!m;t.exports=p?function(t){if(u)return c.apply(this,arguments)||0;var e=i(this),a=l(e.length),s=a-1;for(arguments.length>1&&(s=r(s,n(arguments[1]))),s<0&&(s=a+s);s>=0;s--)if(s in e&&e[s]===t)return s||0;return-1}:c},f066:function(t,e,a){},fb6a:function(t,e,a){"use strict";var i=a("23e7"),n=a("861d"),l=a("e8b5"),s=a("23cb"),o=a("50c4"),r=a("fc6a"),c=a("8418"),u=a("b622"),d=a("1dde"),m=a("ae40"),p=d("slice"),f=m("slice",{ACCESSORS:!0,0:0,1:2}),h=u("species"),v=[].slice,b=Math.max;i({target:"Array",proto:!0,forced:!p||!f},{slice:function(t,e){var a,i,u,d=r(this),m=o(d.length),p=s(t,m),f=s(void 0===e?m:e,m);if(l(d)&&(a=d.constructor,"function"!=typeof a||a!==Array&&!l(a.prototype)?n(a)&&(a=a[h],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return v.call(d,p,f);for(i=new(void 0===a?Array:a)(b(f-p,0)),u=0;p<f;p++,u++)p in d&&c(i,u,d[p]);return i.length=u,i}})},fd51:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"t-head"},[a("h2",[t._v(t._s(t.formTitle))]),a("p",[t._v(t._s(t.formDesc))])])},n=[],l={name:"Head",data:function(){return{}},props:{formTitle:{type:String},formDesc:{type:String}}},s=l,o=a("2877"),r=Object(o["a"])(s,i,n,!1,null,null,null);e["a"]=r.exports}}]);
//# sourceMappingURL=chunk-239a381e.7a84b79e.js.map